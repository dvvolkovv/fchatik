<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Platform - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 12h18M3 6h18M3 18h18" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <h1 class="app-title">AI Chat Platform</h1>
            </div>
            
            <div class="header-center">
                <div class="model-selector">
                    <button class="model-select-btn" id="modelSelectBtn">
                        <span class="model-icon">ü§ñ</span>
                        <span class="model-name" id="currentModel">GPT-4 Turbo</span>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4 6l4 4 4-4"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="header-right">
                <button class="icon-btn theme-toggle" id="themeToggle" aria-label="Toggle theme" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <button class="icon-btn" id="authBtn" aria-label="Login" title="–í—Ö–æ–¥" onclick="showAuthModal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M15 12H3"/>
                    </svg>
                </button>
                <button class="icon-btn" id="profileBtn" aria-label="Profile" title="–ü—Ä–æ—Ñ–∏–ª—å">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </button>
                <button class="icon-btn" id="logoutBtn" aria-label="Logout" title="–í—ã–π—Ç–∏" onclick="logout()" style="display: none;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/>
                    </svg>
                </button>
                <div class="balance-display">
                    <span class="balance-icon">üí∞</span>
                    <span class="balance-amount" id="balanceAmount">0.00‚ÇΩ</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <button class="new-chat-btn" id="newChatBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 5v14m-7-7h14" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span>–ù–æ–≤—ã–π —á–∞—Ç</span>
                    </button>
                </div>

                <div class="search-box">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤..." id="searchInput">
                </div>

                <nav class="sidebar-nav">
                    <button class="nav-item active" data-filter="all">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>–í—Å–µ —á–∞—Ç—ã</span>
                    </button>
                    <button class="nav-item" data-filter="favorites">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                        <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                    </button>
                    <button class="nav-item" data-filter="trash">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        </svg>
                        <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
                    </button>
                </nav>

                <div class="chat-list" id="chatList">
                    <!-- Chat items will be dynamically inserted here -->
                </div>
            </aside>

            <!-- Chat Area -->
            <main class="chat-area">
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <div class="welcome-icon">üí¨</div>
                        <button class="primary-btn" id="welcomeNewChatBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 5v14m-7-7h14" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç
                        </button>
                    </div>
                </div>

                <!-- Chat Container -->
                <div class="chat-container" id="chatContainer" style="display: none;">
                    <!-- Chat Header -->
                    <div class="chat-header">
                        <h2 class="chat-title" id="chatTitle">–ù–æ–≤—ã–π —á–∞—Ç</h2>
                        <div class="chat-actions">
                            <button class="icon-btn" id="exportChatBtn" title="–≠–∫—Å–ø–æ—Ä—Ç">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5m0 0L7 8m5-5v12"/>
                                </svg>
                            </button>
                            <button class="icon-btn" id="chatMenuBtn" title="–ú–µ–Ω—é">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="12" cy="12" r="1"/>
                                    <circle cx="12" cy="5" r="1"/>
                                    <circle cx="12" cy="19" r="1"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div class="messages-container" id="messagesContainer">
                        <!-- Messages will be dynamically inserted here -->
                    </div>

                    <!-- Input Area -->
                    <div class="input-area">
                        <div class="attachment-preview" id="attachmentPreview" style="display: none;">
                            <!-- Attachment previews will be shown here -->
                        </div>
                        
                        <div class="input-toolbar">
                            <button class="tool-btn" id="attachFileBtn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                            </button>
                            <button class="tool-btn" id="attachImageBtn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="m21 15-5-5L5 21"/>
                                </svg>
                            </button>
                            <button class="tool-btn" id="attachDocBtn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <path d="M14 2v6h6m-4 5H8m8 4H8m2-8H8"/>
                                </svg>
                            </button>
                            <button class="tool-btn" id="generateImageBtn" title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <path d="M9 9h6v6H9z"/>
                                    <path d="M9 3v6m6-6v6m6 0h-6m6 6h-6M9 21v-6m-6-6h6m-6 6h6"/>
                                </svg>
                            </button>
                            <div class="divider"></div>
                            <button class="tool-btn voice-btn" id="voiceInputBtn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (–Ω–∞–∂–º–∏—Ç–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                                    <line x1="12" y1="19" x2="12" y2="23"/>
                                    <line x1="8" y1="23" x2="16" y2="23"/>
                                </svg>
                            </button>
                        </div>

                        <div class="input-wrapper">
                            <textarea 
                                id="messageInput" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." 
                                rows="1"
                                maxlength="10000"
                            ></textarea>
                            <button class="send-btn" id="sendBtn" disabled>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="input-footer">
                            <span class="char-count" id="charCount">0 / 10000</span>
                            <span class="token-estimate" id="tokenEstimate">~0 —Ç–æ–∫–µ–Ω–æ–≤</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Model Selection Modal -->
    <div class="modal" id="modelModal" style="display: none;">
        <div class="modal-overlay" id="modelModalOverlay"></div>
        <div class="modal-content model-modal-content">
            <div class="modal-header">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</h3>
                <button class="modal-close" id="modelModalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 6L6 18M6 6l12 12" stroke-width="2"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="models-grid" id="modelsGrid">
                    <!-- Models will be inserted dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal" style="display: none;">
        <div class="modal-overlay" id="profileModalOverlay"></div>
        <div class="modal-content profile-modal-content">
            <div class="modal-header">
                <h3>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <button class="modal-close" id="profileModalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 6L6 18M6 6l12 12" stroke-width="2"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="profile-section">
                    <h4>üìä –¶–µ–Ω–Ω–æ—Å—Ç–∏</h4>
                    <div class="value-sliders" id="valueSliders">
                        <!-- Value sliders will be inserted here -->
                    </div>
                </div>
                
                <div class="profile-section">
                    <h4>üéØ –ò–Ω—Ç–µ—Ä–µ—Å—ã</h4>
                    <div class="interests-tags" id="interestsTags">
                        <!-- Interest tags will be inserted here -->
                    </div>
                    <input type="text" class="add-interest-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å..." id="addInterestInput">
                </div>
                
                <div class="profile-section">
                    <h4>üõ†Ô∏è –ù–∞–≤—ã–∫–∏</h4>
                    <div class="skills-list" id="skillsList">
                        <!-- Skills will be inserted here -->
                    </div>
                    <input type="text" class="add-skill-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫..." id="addSkillInput">
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary-btn" id="profileCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="primary-btn" id="profileSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal" style="display: none;">
        <div class="modal-overlay" onclick="closeAuthModal()"></div>
        <div class="modal-content auth-modal-content">
            <div class="modal-header">
                <h3 id="authModalTitle">–í—Ö–æ–¥ –≤ AI Chat Platform</h3>
                <button class="modal-close" onclick="closeAuthModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <div id="loginForm" class="auth-form">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    <button class="primary-btn" onclick="handleLogin()">–í–æ–π—Ç–∏</button>
                    <div class="auth-switch">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="switchToRegister(); return false;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    </div>
                </div>
                
                <!-- Register Form -->
                <div id="registerForm" class="auth-form" style="display: none;">
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                    <input type="password" id="registerPasswordConfirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                    <button class="primary-btn" onclick="handleRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <div class="auth-switch">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="switchToLogin(); return false;">–í—Ö–æ–¥</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file inputs -->
    <input type="file" id="fileInput" accept="*/*" style="display: none;" multiple>
    <input type="file" id="imageInput" accept="image/*" style="display: none;" multiple>
    <input type="file" id="docInput" accept=".pdf,.doc,.docx,.txt,.md" style="display: none;" multiple>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
